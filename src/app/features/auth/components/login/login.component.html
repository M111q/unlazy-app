<div class="login-component">
  <!-- Form Title -->
  <h2 class="auth-form-title">Zaloguj się</h2>
  <p class="auth-form-subtitle">
    Wprowadź swoje dane, aby uzyskać dostęp do konta
  </p>

  <!-- Login Form -->
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" novalidate>

    <!-- Email Field -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Adres email</mat-label>
        <input matInput
               type="email"
               formControlName="email"
               autocomplete="email"
               [attr.aria-describedby]="hasFieldError('email') ? 'email-error' : null">
        <mat-icon matPrefix>email</mat-icon>
        <mat-error id="email-error" *ngIf="hasFieldError('email')">
          {{ getFieldError('email') }}
        </mat-error>
        <mat-hint>Użyj adresu email powiązanego z Twoim kontem</mat-hint>
      </mat-form-field>
    </div>

    <!-- Password Field -->
    <div class="form-row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Hasło</mat-label>
        <input matInput
               [type]="hidePassword() ? 'password' : 'text'"
               formControlName="password"
               autocomplete="current-password"
               [attr.aria-describedby]="hasFieldError('password') ? 'password-error' : null">
        <mat-icon matPrefix>lock</mat-icon>
        <button mat-icon-button
                matSuffix
                type="button"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="hidePassword() ? 'Pokaż hasło' : 'Ukryj hasło'"
                [attr.aria-pressed]="!hidePassword()">
          <mat-icon>{{ hidePassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
        <mat-error id="password-error" *ngIf="hasFieldError('password')">
          {{ getFieldError('password') }}
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Form Validation Summary -->
    <div class="validation-summary"
         *ngIf="validationErrors().length > 0"
         role="alert"
         aria-live="polite">
      <mat-icon class="warning-icon">warning</mat-icon>
      <div class="validation-errors">
        <p class="validation-title">Popraw następujące błędy:</p>
        <ul class="validation-list">
          <li *ngFor="let error of validationErrors()" class="validation-item">
            {{ error.message }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Submit Button -->
    <button mat-raised-button
            color="primary"
            type="submit"
            class="auth-submit-button"
            [disabled]="!isFormValid"
            [attr.aria-describedby]="isSubmitting() ? 'loading-message' : null">
      <mat-icon *ngIf="isSubmitting()" class="loading-icon">sync</mat-icon>
      <mat-icon *ngIf="!isSubmitting()">login</mat-icon>
      {{ submitButtonText }}
    </button>

    <!-- Loading message for screen readers -->
    <div id="loading-message"
         class="sr-only"
         *ngIf="isSubmitting()"
         aria-live="polite">
      Trwa logowanie, proszę czekać...
    </div>

  </form>

  <!-- Forgot Password Link -->
  <div class="auth-link">
    <a routerLink="/auth/reset-password"
       class="forgot-password-link"
       [tabindex]="isSubmitting() ? '-1' : '0'">
      Zapomniałeś hasła?
    </a>
  </div>

  <!-- Divider -->
  <div class="auth-divider">
    <span>lub</span>
  </div>

  <!-- Register Link -->
  <div class="auth-link">
    <span>Nie masz konta? </span>
    <a routerLink="/auth/register"
       [tabindex]="isSubmitting() ? '-1' : '0'">
      Zarejestruj się
    </a>
  </div>

</div>
